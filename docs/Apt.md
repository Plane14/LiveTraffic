Airport Scenery Data {#apt_dat}
========================

LiveTraffic reads some airport scenery data from `apt.dat` files
as configured in `Custom Scenery/scenery_packs.ini`.

Elements Read from apt.dat
--

The format of an `apt.dat` file is take from
[X-Plane's developer documentation](https://developer.x-plane.com/article/airport-data-apt-dat-file-format-specification/).
But apparently this document in version 11-April-2019 is not fully updates with
latest additions to Line Type Codes (p. 17).

So I tried all line markings and light types and came up with this sample file:

    A
    1130 Generated by WorldEditor 2.2.0r2
    
    1     16 0 0 LANG Langeoog
    1302 country DE
    1302 gui_label 2D
    100 36.00 1 0 0.00 1 2 1 05  53.74070666  007.49366777    0    0 1 0 0 0 23  53.74404535  007.50169467    0    0 1 0 0 0
    120 ILS Critical Wide Black + amber/green uni
    111  53.73609086  007.49351677 61 108
    111  53.73612375  007.49593548 61 108
    115  53.73612375  007.49827078
    120 ILS Critical Wide + amber/green
    111  53.73655134  007.49348897 11 105
    111  53.73648556  007.49607448 11 105
    115  53.73651845  007.49840979
    120 Single Taxi Wide Black + Unidirectional amber/green
    111  53.73691316  007.49354451 60 108
    111  53.73692960  007.49621363 60 108
    115  53.73696249  007.49852130
    120 Single Taxi Wide + Green Lights
    111  53.73737365  007.49343329 10 101
    111  53.73734075  007.49626923 10 101
    115  53.73735720  007.49849350
    120 Solid Yellow + Green Centerlights
    111  53.73923205  007.49850740 1 101
    111  53.73923205  007.49611631 1 101
    115  53.73923205  007.49350280
    120 ILS-critical Centerline Black + Hold Short Centerlights amber/green
    111  53.73780124  007.49332208 57 105
    111  53.73775190  007.49601900 57 105
    115  53.73773546  007.49860471
    120 ILS-critical Centerline + Hold Short Centerlights amber/green
    111  53.73831107  007.49332208 7 105
    111  53.73829462  007.49618582 7 105
    115  53.73826173  007.49882714
    120 Solid Yellow + Unidirectional Centerlights
    111  53.73875511  007.49339159 1 107
    111  53.73878800  007.49700602 1 107
    115  53.73877156  007.49878543
    99

### Line Types

The following line types are accepted as nodes of taxiway centerlines and make up the
taxiway network in LiveTraffic (after quite some optimizations):

Row Code | Meaning
-------- | -------
120 | Header of a group of "Linear Features", specifically painted surface markings and light strings on them
111 | Node in such a group, plain
112 | Node with Bezier control point (LiveTraffic currently ignores the fact that this is a Bezier curve and just used the node's location)
113 | Node, which closes a loop
114 | Node, which closes a loop, with Bezier control point (Bezier ignored)
115 | Node, which terminates a line, should be last line of a group started with `120`, but LiveTraffic doesn't rely on this
116 | Node, which terminates a line, with Bezier control point

**Note:** Only nodes with the following Line Type Codes are used as taxiway centerlines,
other nodes are simply ignored:

Line Type Code | Solid yellow | wide | broken yellow on each side | black border | Usage
-------- | - | - | - | - | -----
1 | X |  |  |  | Standard Taxiway Centerline
7 | X |  | X |  | Taxiway centerlines in runway safety zones, ILS critical areas
10 | X | X |  |  | Standard Taxiway Centerline (wide)
11 | X | X | X |  | Taxiway centerlines in runway safety zones, ILS critical areas (wide)
51 | X |  |  | X | Standard Taxiway Centerline (on concrete)
57 | X |  | X | X | Taxiway centerlines in runway safety zones, ILS critical areas (on concrete)
60 | X | X |  | X | Standard Taxiway Centerline (wide, on concrete)
61 | X | X | X | X | Taxiway centerlines in runway safety zones, ILS critical areas (wide, on concrete)

Line Type Code (Lights) | green | amber | uni-directional | Usage
------------- | ----- | ----- | ---------- | --------
101 | X |   |   | Standard taxiway center lights
105 | X | X |   | Center lights in runway safety zones, ILS critical areas
107 | X |   | X | Standard taxiway center lights (unidirectional) 
108 | X | X | X | Center lights in runway safety zones, ILS critical areas (uni-directional)

Alternatively, if no taxi centerlines are found (which is possible on grass fields),
the taxiroute network can be used instead. Typically, the `1200` groups of taxiroute
networks are added to the end of `apt.dat`. So, if LiveTraffic finds a `1200` row
without having seen a `120` row previously, then it reads the `1200` groups.

Row Code | Meaning
-------- | -------
1201 | A node in the taxi route network
1202 | An edge in the taxi route network, connecting two previously defined nodes

Ramp location are read from the `1300` class of rows:

Row Code | Meaning
-------- | -------
1300 | Start up location

Definitions
--

The following terms are used throught the (code) documentation:

- **Node**: A position, where edges connect, relates to a 111-116 line in `apt.dat`\n
- **Edge**: The connection of two nodes, relates to two consecutive 111-116 lines in `apt.dat`\n
- **Path**: A set of connecting edges, relates to a gorup of 111-116 lines in `apt.dat`, headed by a 120 line\n
- **Network**: All paths and runways of an airport combined. The network is what is searched
for shortest paths between any two points.
